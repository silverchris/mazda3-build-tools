<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>D-Bus: Data slots</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">D-Bus
   &#160;<span id="projectnumber">1.6.30</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Data slots<div class="ingroups"><a class="el" href="group__DBusInternals.html">D-Bus secret internal implementation details</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Storing data by ID.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5edceab2f5849ff8a6f6cee5d1afc906"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga5edceab2f5849ff8a6f6cee5d1afc906">_dbus_data_slot_allocator_init</a> (<a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *allocator)</td></tr>
<tr class="memdesc:ga5edceab2f5849ff8a6f6cee5d1afc906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a data slot allocator object, used to assign integer IDs for data slots.  <a href="group__DBusDataSlot.html#ga5edceab2f5849ff8a6f6cee5d1afc906">More...</a><br /></td></tr>
<tr class="separator:ga5edceab2f5849ff8a6f6cee5d1afc906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c37c4cfe534973b4e6260aa5014564f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga2c37c4cfe534973b4e6260aa5014564f">_dbus_data_slot_allocator_alloc</a> (<a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *allocator, <a class="el" href="structDBusRMutex.html">DBusRMutex</a> **mutex_loc, <a class="el" href="group__DBusTypes.html#gab18afa60e9b17b6e322735bda3d863d8">dbus_int32_t</a> *slot_id_p)</td></tr>
<tr class="memdesc:ga2c37c4cfe534973b4e6260aa5014564f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates an integer ID to be used for storing data in a <a class="el" href="structDBusDataSlotList.html" title="Data structure that stores the actual user data set at a given slot.">DBusDataSlotList</a>.  <a href="group__DBusDataSlot.html#ga2c37c4cfe534973b4e6260aa5014564f">More...</a><br /></td></tr>
<tr class="separator:ga2c37c4cfe534973b4e6260aa5014564f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga059c50a24cd9fc984e918e6159841633"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga059c50a24cd9fc984e918e6159841633">_dbus_data_slot_allocator_free</a> (<a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *allocator, <a class="el" href="group__DBusTypes.html#gab18afa60e9b17b6e322735bda3d863d8">dbus_int32_t</a> *slot_id_p)</td></tr>
<tr class="memdesc:ga059c50a24cd9fc984e918e6159841633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates an ID previously allocated with <a class="el" href="group__DBusDataSlot.html#ga2c37c4cfe534973b4e6260aa5014564f" title="Allocates an integer ID to be used for storing data in a DBusDataSlotList.">_dbus_data_slot_allocator_alloc()</a>.  <a href="group__DBusDataSlot.html#ga059c50a24cd9fc984e918e6159841633">More...</a><br /></td></tr>
<tr class="separator:ga059c50a24cd9fc984e918e6159841633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6de49b3a1210202215d40a5a19806992"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga6de49b3a1210202215d40a5a19806992">_dbus_data_slot_list_init</a> (<a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *list)</td></tr>
<tr class="memdesc:ga6de49b3a1210202215d40a5a19806992"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a slot list.  <a href="group__DBusDataSlot.html#ga6de49b3a1210202215d40a5a19806992">More...</a><br /></td></tr>
<tr class="separator:ga6de49b3a1210202215d40a5a19806992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2952f9f686d96e7114fc49ab7452e1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#gad2952f9f686d96e7114fc49ab7452e1a">_dbus_data_slot_list_set</a> (<a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *allocator, <a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *list, int slot, void *data, <a class="el" href="group__DBusMemory.html#ga061bcded226d76c7d7de35beaa165cb5">DBusFreeFunction</a> free_data_func, <a class="el" href="group__DBusMemory.html#ga061bcded226d76c7d7de35beaa165cb5">DBusFreeFunction</a> *old_free_func, void **old_data)</td></tr>
<tr class="memdesc:gad2952f9f686d96e7114fc49ab7452e1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a pointer in the data slot list, along with an optional function to be used for freeing the data when the data is set again, or when the slot list is finalized.  <a href="group__DBusDataSlot.html#gad2952f9f686d96e7114fc49ab7452e1a">More...</a><br /></td></tr>
<tr class="separator:gad2952f9f686d96e7114fc49ab7452e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43f741229f0c38788442601e2750ec66"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga43f741229f0c38788442601e2750ec66">_dbus_data_slot_list_get</a> (<a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *allocator, <a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *list, int slot)</td></tr>
<tr class="memdesc:ga43f741229f0c38788442601e2750ec66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves data previously set with _dbus_data_slot_list_set_data().  <a href="group__DBusDataSlot.html#ga43f741229f0c38788442601e2750ec66">More...</a><br /></td></tr>
<tr class="separator:ga43f741229f0c38788442601e2750ec66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c96d2ca263ba397b4da2956a49ae282"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#ga3c96d2ca263ba397b4da2956a49ae282">_dbus_data_slot_list_clear</a> (<a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *list)</td></tr>
<tr class="memdesc:ga3c96d2ca263ba397b4da2956a49ae282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all data slots contained in the list, calling application-provided free functions if they exist.  <a href="group__DBusDataSlot.html#ga3c96d2ca263ba397b4da2956a49ae282">More...</a><br /></td></tr>
<tr class="separator:ga3c96d2ca263ba397b4da2956a49ae282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc399733376c462c3010271a2d431e73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBusDataSlot.html#gabc399733376c462c3010271a2d431e73">_dbus_data_slot_list_free</a> (<a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *list)</td></tr>
<tr class="memdesc:gabc399733376c462c3010271a2d431e73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the data slot list and all data slots contained in it, calling application-provided free functions if they exist.  <a href="group__DBusDataSlot.html#gabc399733376c462c3010271a2d431e73">More...</a><br /></td></tr>
<tr class="separator:gabc399733376c462c3010271a2d431e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Storing data by ID. </p>
<p>Types and functions related to storing data by an allocated ID. This is used for <a class="el" href="group__DBusConnection.html#ga845b4942399f43dd4ac644de7cb9e3ff" title="Stores a pointer on a DBusConnection, along with an optional function to be used for freeing the data...">dbus_connection_set_data()</a>, <a class="el" href="group__DBusServer.html#gab9ecb216dc9c40b0c7d370673fb9b269" title="Stores a pointer on a DBusServer, along with an optional function to be used for freeing the data whe...">dbus_server_set_data()</a>, etc. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2c37c4cfe534973b4e6260aa5014564f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c37c4cfe534973b4e6260aa5014564f">&#9670;&nbsp;</a></span>_dbus_data_slot_allocator_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a> _dbus_data_slot_allocator_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusRMutex.html">DBusRMutex</a> **&#160;</td>
          <td class="paramname"><em>mutex_loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusTypes.html#gab18afa60e9b17b6e322735bda3d863d8">dbus_int32_t</a> *&#160;</td>
          <td class="paramname"><em>slot_id_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates an integer ID to be used for storing data in a <a class="el" href="structDBusDataSlotList.html" title="Data structure that stores the actual user data set at a given slot.">DBusDataSlotList</a>. </p>
<p>If the value at *slot_id_p is not -1, this function just increments the refcount for the existing slot ID. If the value is -1, a new slot ID is allocated and stored at *slot_id_p.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>the allocator </td></tr>
    <tr><td class="paramname">mutex_loc</td><td>the location lock for this allocator </td></tr>
    <tr><td class="paramname">slot_id_p</td><td>address to fill with the slot ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00069">69</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-internals_8h_source.html#l00139">_dbus_assert</a>, <a class="el" href="dbus-internals_8h_source.html#l00149">_dbus_assert_not_reached</a>, <a class="el" href="dbus-threads_8c_source.html#l00173">_dbus_rmutex_lock()</a>, <a class="el" href="dbus-threads_8c_source.html#l00197">_dbus_rmutex_unlock()</a>, <a class="el" href="dbus-internals_8c_source.html#l00273">_dbus_warn_check_failed()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00057">DBusDataSlotAllocator::allocated_slots</a>, <a class="el" href="dbus-memory_8c_source.html#l00600">dbus_realloc()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00060">DBusDataSlotAllocator::lock_loc</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00058">DBusDataSlotAllocator::n_allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00059">DBusDataSlotAllocator::n_used_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00049">DBusAllocatedSlot::refcount</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00048">DBusAllocatedSlot::slot_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-connection_8c_source.html#l05900">dbus_connection_allocate_data_slot()</a>, <a class="el" href="dbus-message_8c_source.html#l04485">dbus_message_allocate_data_slot()</a>, <a class="el" href="dbus-pending-call_8c_source.html#l00766">dbus_pending_call_allocate_data_slot()</a>, and <a class="el" href="dbus-server_8c_source.html#l01084">dbus_server_allocate_data_slot()</a>.</p>

</div>
</div>
<a id="ga059c50a24cd9fc984e918e6159841633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga059c50a24cd9fc984e918e6159841633">&#9670;&nbsp;</a></span>_dbus_data_slot_allocator_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_data_slot_allocator_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusTypes.html#gab18afa60e9b17b6e322735bda3d863d8">dbus_int32_t</a> *&#160;</td>
          <td class="paramname"><em>slot_id_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocates an ID previously allocated with <a class="el" href="group__DBusDataSlot.html#ga2c37c4cfe534973b4e6260aa5014564f" title="Allocates an integer ID to be used for storing data in a DBusDataSlotList.">_dbus_data_slot_allocator_alloc()</a>. </p>
<p>Existing data stored on existing <a class="el" href="structDBusDataSlotList.html" title="Data structure that stores the actual user data set at a given slot.">DBusDataSlotList</a> objects with this ID will be freed when the data list is finalized, but may not be retrieved (and may only be replaced if someone else reallocates the slot). The slot value is reset to -1 if this is the last unref.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>the allocator </td></tr>
    <tr><td class="paramname">slot_id_p</td><td>address where we store the slot </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00165">165</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-internals_8h_source.html#l00139">_dbus_assert</a>, <a class="el" href="dbus-threads_8c_source.html#l00173">_dbus_rmutex_lock()</a>, <a class="el" href="dbus-threads_8c_source.html#l00197">_dbus_rmutex_unlock()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00057">DBusDataSlotAllocator::allocated_slots</a>, <a class="el" href="dbus-memory_8c_source.html#l00700">dbus_free()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00060">DBusDataSlotAllocator::lock_loc</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00058">DBusDataSlotAllocator::n_allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00059">DBusDataSlotAllocator::n_used_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00049">DBusAllocatedSlot::refcount</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00048">DBusAllocatedSlot::slot_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-connection_8c_source.html#l05919">dbus_connection_free_data_slot()</a>, <a class="el" href="dbus-message_8c_source.html#l04504">dbus_message_free_data_slot()</a>, <a class="el" href="dbus-pending-call_8c_source.html#l00787">dbus_pending_call_free_data_slot()</a>, and <a class="el" href="dbus-server_8c_source.html#l01103">dbus_server_free_data_slot()</a>.</p>

</div>
</div>
<a id="ga5edceab2f5849ff8a6f6cee5d1afc906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5edceab2f5849ff8a6f6cee5d1afc906">&#9670;&nbsp;</a></span>_dbus_data_slot_allocator_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a> _dbus_data_slot_allocator_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a data slot allocator object, used to assign integer IDs for data slots. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>the allocator to initialize </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00046">46</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-dataslot_8h_source.html#l00057">DBusDataSlotAllocator::allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00060">DBusDataSlotAllocator::lock_loc</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00058">DBusDataSlotAllocator::n_allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00059">DBusDataSlotAllocator::n_used_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.</p>

</div>
</div>
<a id="ga3c96d2ca263ba397b4da2956a49ae282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c96d2ca263ba397b4da2956a49ae282">&#9670;&nbsp;</a></span>_dbus_data_slot_list_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_data_slot_list_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all data slots contained in the list, calling application-provided free functions if they exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>the list to clear </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00327">327</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-dataslot_8h_source.html#l00038">data</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00039">free_data_func</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00069">DBusDataSlotList::slots</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-dataslot_8c_source.html#l00350">_dbus_data_slot_list_free()</a>.</p>

</div>
</div>
<a id="gabc399733376c462c3010271a2d431e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc399733376c462c3010271a2d431e73">&#9670;&nbsp;</a></span>_dbus_data_slot_list_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_data_slot_list_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the data slot list and all data slots contained in it, calling application-provided free functions if they exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>the list to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00350">350</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-dataslot_8c_source.html#l00327">_dbus_data_slot_list_clear()</a>, <a class="el" href="dbus-memory_8c_source.html#l00700">dbus_free()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00070">DBusDataSlotList::n_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00069">DBusDataSlotList::slots</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-server_8c_source.html#l00193">_dbus_server_finalize_base()</a>.</p>

</div>
</div>
<a id="ga43f741229f0c38788442601e2750ec66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga43f741229f0c38788442601e2750ec66">&#9670;&nbsp;</a></span>_dbus_data_slot_list_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* _dbus_data_slot_list_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves data previously set with _dbus_data_slot_list_set_data(). </p>
<p>The slot must still be allocated (must not have been freed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>the allocator slot was allocated from </td></tr>
    <tr><td class="paramname">list</td><td>the data slot list </td></tr>
    <tr><td class="paramname">slot</td><td>the slot to get data from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the data, or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00298">298</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-internals_8h_source.html#l00139">_dbus_assert</a>, <a class="el" href="dbus-threads_8c_source.html#l00173">_dbus_rmutex_lock()</a>, <a class="el" href="dbus-threads_8c_source.html#l00197">_dbus_rmutex_unlock()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00057">DBusDataSlotAllocator::allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00038">data</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00060">DBusDataSlotAllocator::lock_loc</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00070">DBusDataSlotList::n_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00048">DBusAllocatedSlot::slot_id</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00069">DBusDataSlotList::slots</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-connection_8c_source.html#l05998">dbus_connection_get_data()</a>, <a class="el" href="dbus-message_8c_source.html#l04561">dbus_message_get_data()</a>, <a class="el" href="dbus-pending-call_8c_source.html#l00835">dbus_pending_call_get_data()</a>, and <a class="el" href="dbus-server_8c_source.html#l01164">dbus_server_get_data()</a>.</p>

</div>
</div>
<a id="ga6de49b3a1210202215d40a5a19806992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6de49b3a1210202215d40a5a19806992">&#9670;&nbsp;</a></span>_dbus_data_slot_list_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_data_slot_list_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a slot list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>the list to initialize. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00213">213</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-dataslot_8h_source.html#l00070">DBusDataSlotList::n_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="dbus-dataslot_8h_source.html#l00069">DBusDataSlotList::slots</a>.</p>

</div>
</div>
<a id="gad2952f9f686d96e7114fc49ab7452e1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2952f9f686d96e7114fc49ab7452e1a">&#9670;&nbsp;</a></span>_dbus_data_slot_list_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349">dbus_bool_t</a> _dbus_data_slot_list_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotAllocator.html">DBusDataSlotAllocator</a> *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusDataSlotList.html">DBusDataSlotList</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusMemory.html#ga061bcded226d76c7d7de35beaa165cb5">DBusFreeFunction</a>&#160;</td>
          <td class="paramname"><em>free_data_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusMemory.html#ga061bcded226d76c7d7de35beaa165cb5">DBusFreeFunction</a> *&#160;</td>
          <td class="paramname"><em>old_free_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>old_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a pointer in the data slot list, along with an optional function to be used for freeing the data when the data is set again, or when the slot list is finalized. </p>
<p>The slot number must have been allocated with <a class="el" href="group__DBusDataSlot.html#ga2c37c4cfe534973b4e6260aa5014564f" title="Allocates an integer ID to be used for storing data in a DBusDataSlotList.">_dbus_data_slot_allocator_alloc()</a> for the same allocator passed in here. The same allocator has to be used with the slot list every time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocator</td><td>the allocator to use </td></tr>
    <tr><td class="paramname">list</td><td>the data slot list </td></tr>
    <tr><td class="paramname">slot</td><td>the slot number </td></tr>
    <tr><td class="paramname">data</td><td>the data to store </td></tr>
    <tr><td class="paramname">free_data_func</td><td>finalizer function for the data </td></tr>
    <tr><td class="paramname">old_free_func</td><td>free function for any previously-existing data </td></tr>
    <tr><td class="paramname">old_data</td><td>previously-existing data, should be freed with old_free_func </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> if there was enough memory to store the data </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-dataslot_8c_source.html#l00237">237</a> of file <a class="el" href="dbus-dataslot_8c_source.html">dbus-dataslot.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-internals_8h_source.html#l00139">_dbus_assert</a>, <a class="el" href="dbus-threads_8c_source.html#l00173">_dbus_rmutex_lock()</a>, <a class="el" href="dbus-threads_8c_source.html#l00197">_dbus_rmutex_unlock()</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00057">DBusDataSlotAllocator::allocated_slots</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00038">data</a>, <a class="el" href="dbus-memory_8c_source.html#l00600">dbus_realloc()</a>, <a class="el" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00039">free_data_func</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00060">DBusDataSlotAllocator::lock_loc</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00070">DBusDataSlotList::n_slots</a>, <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00048">DBusAllocatedSlot::slot_id</a>, <a class="el" href="dbus-dataslot_8h_source.html#l00069">DBusDataSlotList::slots</a>, and <a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-pending-call_8c_source.html#l00509">_dbus_pending_call_set_data_unlocked()</a>, <a class="el" href="dbus-connection_8c_source.html#l05949">dbus_connection_set_data()</a>, <a class="el" href="dbus-message_8c_source.html#l04525">dbus_message_set_data()</a>, and <a class="el" href="dbus-server_8c_source.html#l01124">dbus_server_set_data()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
